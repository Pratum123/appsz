<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>üìò Quiz App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- canvas me nhi chahiye -->
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #eef1f7;
      margin: 0;
      padding: 0;
    }
    header {
      background: #3949ab;
      color: white;
      padding: 20px;
      font-size: 24px;
      text-align: center;
    }
    .section {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 700px;
      margin: 30px auto;
    }
    textarea, input, select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
      box-sizing: border-box;
    }
    .btn {
      background: #3949ab;
      color: white;
      font-weight: bold;
      border: none;
      padding: 12px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    .btn-option {
      display: block;
      width: 100%;
      text-align: left;
      padding: 10px 15px;
      border-radius: 6px;
      background: #f0f0f0;
      border: 1px solid #ccc;
      margin: 8px 0;
      font-size: 16px;
      cursor: pointer;
    }
    .edit-btn {
      width: 24px;
      height: 24px;
      font-size: 14px;
      background: red;
      color: white;
      border-radius: 50%;
      border: none;
      margin-right: 10px;
      cursor: pointer;
      line-height: 24px;
      text-align: center;
      vertical-align: middle;
    }
    .explanation {
      margin-top: 20px;
      font-weight: bold;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }
    #gotoContainer {
      margin-bottom: 15px;
    }
    #gotoInput {
      width: 60%;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    #gotoBtn {
      padding: 9px 12px;
      background: #3949ab;
      color: white;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
<header>üìò Quiz App</header>
<!-- ‡§¨‡§æ‡§ï‡•Ä ‡§ï‡•ã‡§° quiz.js ‡§Æ‡•á‡§Ç ‡§π‡•à, canvas ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à -->
<h2 id="pageTitle" style="text-align:center; color:#3949ab;"></h2>

<div id="inputSection" class="section" style="display:none;">
  <h3>‚ûï ‡§®‡§Ø‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h3>
  <textarea id="question" placeholder="‡§™‡•ç‡§∞‡§∂‡•ç‡§®"></textarea>
  <input id="optA" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ A">
  <input id="optB" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ B">
  <input id="optC" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ C">
  <input id="optD" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ D">
  <select id="correct">
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
  </select>
  <textarea id="explanation" placeholder="‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ"></textarea>
  <button class="btn" onclick="saveQuestion()">üíæ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
  <div id="questionCount" style="margin-top:10px;"></div>
  <div id="editList" style="margin-top:10px;"></div>
</div>

<div id="practiceSection" class="section" style="display:none;">
  <h3>üéØ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏</h3>
  <div id="progress"></div>
  <div id="gotoContainer">
    <input id="gotoInput" type="number" placeholder="‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç">
    <button id="gotoBtn" onclick="goToQuestion()">üîé ‡§ú‡§æ‡§è‡§Å</button>
  </div>
  <div id="quizQuestion"></div>
  <div id="quizOptions"></div>
  <button id="submitBtn" class="btn" onclick="submitQuiz()" style="display:none;">‚úÖ ‡§ï‡•ç‡§µ‡§ø‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<script>
  const main = localStorage.getItem("selectedMain");
  const sub = localStorage.getItem("selectedSub");
  const mode = localStorage.getItem("quizMode");
  const currentKey = `quiz_${main}_${sub}`;

  let questions = JSON.parse(localStorage.getItem(currentKey) || '[]');
  let currentQuestion = 0, correctCount = 0, incorrectCount = 0;
  let editIndex = -1;

  document.getElementById("pageTitle").textContent =
    mode === "input" ? "‚ûï ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç" : "üéØ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏";

  if (mode === "input") {
    document.getElementById("inputSection").style.display = "block";
    document.getElementById("questionCount").textContent = `üî¢ ‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ${questions.length}`;
    listEditable();
  } else {
    if (questions.length === 0) {
      alert("‚ùó ‡§ï‡•ã‡§à ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ!");
      window.location.href = "action.html";
    } else {
      document.getElementById("practiceSection").style.display = "block";
      document.getElementById("submitBtn").style.display = "block";
      showQuestion();
    }
  }

  function saveQuestion() {
    const q = document.getElementById("question").value.trim();
    const A = document.getElementById("optA").value.trim();
    const B = document.getElementById("optB").value.trim();
    const C = document.getElementById("optC").value.trim();
    const D = document.getElementById("optD").value.trim();
    const correct = document.getElementById("correct").value;
    const exp = document.getElementById("explanation").value.trim();

    if (!q || !A || !B || !C || !D || !correct) {
      alert("‚ùó ‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç!");
      return;
    }

    const newQ = { question: q, options: { A, B, C, D }, correct, explanation: exp };

    if (editIndex >= 0) {
      questions[editIndex] = newQ;
      editIndex = -1;
    } else {
      questions.push(newQ);
    }

    localStorage.setItem(currentKey, JSON.stringify(questions));

    document.getElementById("question").value = '';
    document.getElementById("optA").value = '';
    document.getElementById("optB").value = '';
    document.getElementById("optC").value = '';
    document.getElementById("optD").value = '';
    document.getElementById("explanation").value = '';
    document.getElementById("correct").value = 'A';

    document.getElementById("questionCount").textContent = `üî¢ ‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ${questions.length}`;
    listEditable();
    alert("‚úÖ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡•á‡§µ ‡§π‡•Å‡§Ü!");
  }

  function listEditable() {
    const div = document.getElementById("editList");
    div.innerHTML = "";
    questions.forEach((q, i) => {
      const p = document.createElement("p");

      const b = document.createElement("button");
      b.className = "edit-btn";
      b.title = "‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç";
      b.innerText = "‚úèÔ∏è";
      b.onclick = () => editQuestion(i);

      const span = document.createElement("span");
      span.textContent = `${i + 1}. ${q.question}`;

      p.appendChild(b);
      p.appendChild(span);
      div.appendChild(p);
    });
  }

  function editQuestion(index) {
    const q = questions[index];
    document.getElementById("question").value = q.question;
    document.getElementById("optA").value = q.options.A;
    document.getElementById("optB").value = q.options.B;
    document.getElementById("optC").value = q.options.C;
    document.getElementById("optD").value = q.options.D;
    document.getElementById("correct").value = q.correct;
    document.getElementById("explanation").value = q.explanation;
    editIndex = index;
  }

  function showQuestion() {
    const q = questions[currentQuestion];
    if (!q) return;

    document.getElementById("progress").innerHTML =
      `‡§™‡•ç‡§∞‡§∂‡•ç‡§® ${currentQuestion + 1} / ${questions.length}`;

    document.getElementById("quizQuestion").innerHTML =
      `<strong>Q${currentQuestion + 1}:</strong><br>${q.question.replace(/\n/g, "<br>")}`;
    
    document.getElementById("quizOptions").innerHTML = "";

    for (let key in q.options) {
      const btn = document.createElement("button");
      btn.className = "btn-option";
      btn.innerText = `${key}: ${q.options[key]}`;
      btn.onclick = () => checkAnswer(key);
      document.getElementById("quizOptions").appendChild(btn);
    }
  }

  function checkAnswer(selected) {
    const q = questions[currentQuestion];
    const buttons = document.querySelectorAll(".btn-option");

    buttons.forEach(btn => {
      const key = btn.innerText.split(':')[0];
      if (key === q.correct) {
        btn.style.backgroundColor = "green";
        btn.style.color = "white";
      } else if (key === selected) {
        btn.style.backgroundColor = "red";
        btn.style.color = "white";
      }
      btn.disabled = true;
    });

    const explanation = document.createElement("div");
    explanation.className = "explanation";

    if (selected === q.correct) {
      correctCount++;
      explanation.innerHTML = `‚úÖ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞!<br><br>üîç <u>‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ:</u> ${q.explanation}`;
      explanation.style.color = "green";
    } else {
      incorrectCount++;
      explanation.innerHTML = `‚ùå ‡§ó‡§≤‡§§ ‡§â‡§§‡•ç‡§§‡§∞! ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§π‡•à: <b>${q.correct}</b><br><br>üîç <u>‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ:</u> ${q.explanation}`;
      explanation.style.color = "red";
    }

    const nextBtn = document.createElement("button");
    nextBtn.className = "btn";
    nextBtn.innerText = "üëâ ‡§Ö‡§ó‡§≤‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®";
    nextBtn.onclick = () => {
      currentQuestion++;
      showQuestion();
    };

    document.getElementById("quizOptions").appendChild(explanation);
    document.getElementById("quizOptions").appendChild(nextBtn);
  }

  function submitQuiz() {
    const total = correctCount + incorrectCount;
    const acc = total ? ((correctCount / total) * 100).toFixed(2) : 0;

    document.getElementById("quizQuestion").innerHTML =
      `‚úÖ ‡§∏‡§π‡•Ä: ${correctCount}<br>‚ùå ‡§ó‡§≤‡§§: ${incorrectCount}<br>üìä ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ: ${acc}%`;
    document.getElementById("quizOptions").innerHTML = "";
    document.getElementById("submitBtn").style.display = "none";
  }

  function goToQuestion() {
    const val = parseInt(document.getElementById("gotoInput").value);
    if (!val || val < 1 || val > questions.length) {
      alert(`‚ùó ‡§ï‡•É‡§™‡§Ø‡§æ 1 ‡§∏‡•á ${questions.length} ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§Æ‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç`);
      return;
    }
    currentQuestion = val - 1;
    showQuestion();
  }
</script>
</body>
</html>





